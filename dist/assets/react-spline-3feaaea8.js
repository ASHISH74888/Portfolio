import{g as F,c as k,r as d,j as A,O as M,a as C,F as N}from"./index-58aa0e3c.js";var z="Expected a function",L=0/0,P="[object Symbol]",U=/^\s+|\s+$/g,$=/^[-+]0x[0-9a-f]+$/i,W=/^0b[01]+$/i,B=/^0o[0-7]+$/i,G=parseInt,H=typeof k=="object"&&k&&k.Object===Object&&k,K=typeof self=="object"&&self&&self.Object===Object&&self,_=H||K||Function("return this")(),q=Object.prototype,V=q.toString,X=Math.max,J=Math.min,I=function(){return _.Date.now()};function Q(e,t,r){var a,y,h,s,o,f,c=0,S=!1,m=!1,w=!0;if(typeof e!="function")throw new TypeError(z);t=R(t)||0,D(r)&&(S=!!r.leading,m="maxWait"in r,h=m?X(R(r.maxWait)||0,t):h,w="trailing"in r?!!r.trailing:w);function b(n){var l=a,u=y;return a=y=void 0,c=n,s=e.apply(u,l),s}function j(n){return c=n,o=setTimeout(i,t),S?b(n):s}function g(n){var l=n-f,u=n-c,v=t-l;return m?J(v,h-u):v}function p(n){var l=n-f,u=n-c;return f===void 0||l>=t||l<0||m&&u>=h}function i(){var n=I();if(p(n))return O(n);o=setTimeout(i,g(n))}function O(n){return o=void 0,w&&a?b(n):(a=y=void 0,s)}function x(){o!==void 0&&clearTimeout(o),c=0,a=f=y=o=void 0}function E(){return o===void 0?s:O(I())}function T(){var n=I(),l=p(n);if(a=arguments,y=this,f=n,l){if(o===void 0)return j(f);if(m)return o=setTimeout(i,t),b(f)}return o===void 0&&(o=setTimeout(i,t)),s}return T.cancel=x,T.flush=E,T}function D(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Y(e){return!!e&&typeof e=="object"}function Z(e){return typeof e=="symbol"||Y(e)&&V.call(e)==P}function R(e){if(typeof e=="number")return e;if(Z(e))return L;if(D(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=D(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(U,"");var r=W.test(e);return r||B.test(e)?G(e.slice(2),r?2:8):$.test(e)?L:+e}var ee=Q;const ne=F(ee);function te(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}const re=[],ie={width:"100%",height:"100%"},oe=d.forwardRef(function({className:e,children:t,debounceTime:r=300,ignoreDimensions:a=re,parentSizeStyles:y,enableDebounceLeadingCall:h=!0,resizeObserverPolyfill:s,...o},f){const c=d.useRef(null),S=d.useRef(0),[m,w]=d.useState({width:0,height:0,top:0,left:0}),b=d.useMemo(()=>{const j=Array.isArray(a)?a:[a];return ne(g=>{w(p=>Object.keys(p).filter(i=>p[i]!==g[i]).every(i=>j.includes(i))?p:g)},r,{leading:h})},[r,h,a]);return d.useEffect(()=>{const j=s||window.ResizeObserver,g=new j(p=>{p.forEach(i=>{const{left:O,top:x,width:E,height:T}=(i==null?void 0:i.contentRect)??{};S.current=window.requestAnimationFrame(()=>{b({width:E,height:T,top:x,left:O})})})});return c.current&&g.observe(c.current),()=>{window.cancelAnimationFrame(S.current),g.disconnect(),b.cancel()}},[b,s]),A("div",{style:{...ie,...y},ref:te([f,c]),className:e,...o,children:t({...m,ref:c.current,resize:b})})}),ce=d.forwardRef(({scene:e,style:t,onSplineMouseDown:r,onSplineMouseUp:a,onSplineMouseHover:y,onSplineKeyDown:h,onSplineKeyUp:s,onSplineStart:o,onSplineLookAt:f,onSplineFollow:c,onSplineScroll:S,onLoad:m,renderOnDemand:w=!0,wasmPath:b,children:j,...g},p)=>{const i=d.useRef(null),[O,x]=d.useState(!0),[E,T]=d.useState();if(E)throw E;return d.useEffect(()=>{x(!0);let n;const l=[{name:"mouseDown",cb:r},{name:"mouseUp",cb:a},{name:"mouseHover",cb:y},{name:"keyDown",cb:h},{name:"keyUp",cb:s},{name:"start",cb:o},{name:"lookAt",cb:f},{name:"follow",cb:c},{name:"scroll",cb:S}];if(i.current){n=new M(i.current,{renderOnDemand:w,wasmPath:b});async function u(){await n.load(e);for(let v of l)v.cb&&n.addEventListener(v.name,v.cb);x(!1),m==null||m(n)}u().catch(v=>{T(v)})}return()=>{for(let u of l)u.cb&&n.removeEventListener(u.name,u.cb);n.dispose()}},[e]),A(oe,{ref:p,parentSizeStyles:{overflow:"hidden",...t},debounceTime:50,...g,children:()=>C(N,{children:[O&&j,A("canvas",{ref:i,style:{display:O?"none":"block"}})]})})});export{ce as default};
